---
title: "Weather App (Last updated: `r format(Sys.time(), '%B %d, %Y %I:%M %p', tz = 'America/New_York')`)"
author: "Spam_musubi"
format:
  html:
    self-contained: true
    toc: true
    toc-location: left
    toc-title: "Contents"
    page-layout: full
    toc-depth: 2
    toc-floating: true
editor: visual
execute:
  echo: false
  freeze: false
---


![](data/weatherstripes/disney_2024.png){width=100%}

```{r}
require(here)
require(ggplot2)


get_latest_rds <- function(dir_path, verbose = TRUE, return_name = FALSE) {
  rds_files <- list.files(path = dir_path, pattern = "\\.rds$", full.names = TRUE)
  
  if (length(rds_files) == 0) return(if (return_name) NA else NULL)
  
  file_dates <- sub(".*?(\\d{4}-\\d{2}-\\d{1,2})\\.rds$", "\\1", basename(rds_files))
  file_dates <- as.Date(file_dates, format = "%Y-%m-%d")
  
  latest_file <- rds_files[which.max(file_dates)]
  
  if (return_name) {
    return(basename(latest_file))
  } else {
    return(readRDS(latest_file))
  }
}

list.files(here::here("weather_app","data", "historicaldw"))
historicaldw <- get_latest_rds(
  here::here("weather_app","data", "historicaldw")
)

print(historicaldw)
```
